(()=>{"use strict";var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{AjaxNavigation:()=>Y,Chart:()=>d,Cookie:()=>i,DOM:()=>o,Date:()=>h,Detection:()=>l,Emitter:()=>V,InView:()=>_,Map:()=>r,Money:()=>a,Random:()=>s,Request:()=>z,Url:()=>n});var o={};t.r(o),t.d(o,{create:()=>c,remove:()=>p});var i={};t.r(i),t.d(i,{get:()=>u,set:()=>f});var n={};t.r(n),t.d(n,{get:()=>y,getAll:()=>g,isValidURL:()=>x,set:()=>m});var s={};t.r(s),t.d(s,{range:()=>b,uid:()=>v});var r={};t.r(r),t.d(r,{getDistance:()=>w});var a={};t.r(a),t.d(a,{format:()=>S});var l={};t.r(l),t.d(l,{isMobile:()=>T});var h={};t.r(h),t.d(h,{MILLESECONDS:()=>P,format:()=>I,getDifference:()=>D,getMonth:()=>O});var d={};t.r(d),t.d(d,{Donut:()=>H,Pie:()=>q});const c=(t,e,o,i)=>{const n=document.createElement(t);for(let t in e)n.setAttribute(t,e[t]);return o&&(n.innerHTML=o),i&&(i instanceof Element&&n.appendChild(i),i instanceof Array&&i.forEach((t=>{t instanceof Element&&n.appendChild(t)}))),n},p=t=>{t.parentNode.removeChild(t)},f=(t,e,o)=>{let i="";if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3),i="; expires="+n.toUTCString()}document.cookie=t+"="+(e||"")+i+"; path=/"},u=t=>{const e=t+"=",o=document.cookie.split(";");for(var i=0;i<o.length;i++){for(var n=o[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null},g=(t=window.location.href)=>{const e={};return Array.from(new URLSearchParams(new URL(t).search)).forEach((([t,o])=>{e[encodeURIComponent(t)]=encodeURIComponent(o)})),e},y=(t,e)=>g(e)[t],m=t=>{const{url:e=window.location.href,params:o={},pushState:i=!1}=t,n=new URL(e);return Object.entries(o).forEach((([t,e])=>{""===e?n.searchParams.delete(t):n.searchParams.set(t,e.toString())})),i&&window.history.pushState({},"",n),n.href},x=t=>{try{return new URL(t),!0}catch(t){return!1}},v=(t=4)=>new Array(t).fill(null).map((()=>Math.random().toString(16).slice(2))).join("-"),b=(t=0,e=100)=>{const o=Math.min(t,e),i=Math.max(t,e);return Math.floor(Math.random()*(i-o+1)+o)},w=(t,e)=>{if(!t||!e)return 0;const o=(e[0]-t[0])*Math.PI/180,i=(e[1]-t[1])*Math.PI/180,n=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t[0]*Math.PI/180)*Math.cos(e[0]*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),s=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n));return Math.round(6371*s*1e3)},S=(t,e=" ")=>t?parseFloat(t).toString().replace(/\./.test(t)?/(\d)(?=(?:\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g,"$1"+e):"0",T=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),P={seconds:1e3,minutes:6e4,hours:36e5,days:864e5,months:2592e6,years:94608e7},E=(t,e)=>e?t:0===t?6:t-1,O=(t={})=>{const{year:e=(new Date).getFullYear(),month:o=(new Date).getMonth(),weekStartFromSunday:i=!1}=t,n={date:new Date(e,o),count:new Date(e,o+1,0).getDate(),firstWeekDay:E(new Date(e,o).getDay(),i),lastWeekDay:E(new Date(new Date(e,o).setDate(new Date(e,o+1,0).getDate())).getDay(),i)},s={date:new Date(e,o,0),count:new Date(e,o,0).getDate()},r={date:new Date(e,o+1)},a=[];for(let t=n.firstWeekDay-1;t>=0;t--)a.push({day:s.count-t,month:s.date.getMonth(),year:s.date.getFullYear(),previous:!0});for(let t=1;t<=n.count;t++)a.push({day:t,month:n.date.getMonth(),year:n.date.getFullYear(),current:!0});for(let t=1;t<=6-n.lastWeekDay;t++)a.push({day:t,month:r.date.getMonth(),year:r.date.getFullYear(),next:!0});const l=new Date;return a.forEach((t=>{t.day===l.getDate()&&t.year===l.getFullYear()&&t.month===l.getMonth()&&(t.today=!0)})),a},D=(t,e=new Date)=>{if(!t)return null;const o=+e-+t;return Object.keys(P).reduce(((t,e)=>(t[e]=Math.floor(o/P[e]),t)),{})},I=(t,e)=>{let o=e.replace(/{{yyyy}}/g,t.getFullYear().toString());return o=o.replace(/mm/g,(t.getMonth()+1).toString().padStart(2,"0")),o=o.replace(/{{dd}}/g,t.getDate().toString().padStart(2,"0")),o=o.replace(/{{hh}}/g,t.getHours().toString().padStart(2,"0")),o=o.replace(/{{ii}}/g,t.getMinutes().toString().padStart(2,"0")),o=o.replace(/{{ss}}/g,t.getSeconds().toString().padStart(2,"0")),o},M=(t,e)=>{for(var o in e)try{e[o].constructor==Object?t[o]=M(t[o],e[o]):t[o]=e[o]}catch(i){t[o]=e[o]}return t},R=t=>{if("object"!=typeof t)return t;if(!t)return t;var e=t instanceof Array?[]:{};for(var o in t)t.hasOwnProperty(o)&&(e[o]=R(t[o]));return e},C=()=>{for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},L=(t,e,o,i)=>({x:t+Math.cos(i)*o,y:e+Math.sin(i)*o}),W=(t,e)=>(e=parseInt(e),"#"+t.replace(/^#/,"").replace(/../g,(t=>("0"+Math.min(255,Math.max(0,parseInt(t,16)+e)).toString(16)).substr(-2))));CanvasRenderingContext2D.prototype.roundRect=function(t,e,o,i,n){return o<2*n&&(n=o/2),i<2*n&&(n=i/2),this.beginPath(),this.moveTo(t+n,e),this.arcTo(t+o,e,t+o,e+i,n),this.arcTo(t+o,e+i,t,e+i,n),this.arcTo(t,e+i,t,e,n),this.arcTo(t,e,t+o,e,n),this.closePath(),this},CanvasRenderingContext2D.prototype.drawCurve=function(t,e={}){t=R(t);const{closePath:o}=e;if(!t.length)return;let i,n;o&&(t[0]={x:(t[t.length-1].x+t[1].x)/2,y:(t[t.length-1].y+t[1].y)/2},t.push(t[0])),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(let e=0;e<t.length-1;e++)i=(t[e].x+t[e+1].x)/2,n=(t[e].y+t[e+1].y)/2,this.quadraticCurveTo(t[e].x,t[e].y,i,n);const s=t[t.length-1];return this.quadraticCurveTo(s.x,s.y,s.x,s.y),this.stroke(),this},CanvasRenderingContext2D.prototype.drawLineCurve=function(t){t=R(t),this.beginPath(),this.moveTo(t[0].x,t[0].y);let e=0,o=0,i=0,n=0;for(let a=1;a<t.length;a++){const l=t[a-1],h=t[a],d=t[a+1];d&&(i=-.3*(d.x-h.x),n=i*(s=l,((r=d).y-s.y)/(r.x-s.x))*.9),this.bezierCurveTo(l.x-e,l.y-o,h.x+i,h.y+n,h.x,h.y),e=i,o=n}var s,r;return this.stroke(),this};const k={animated:!0,view:{styles:{background:"#1a1e30"}},data:{hover:{enabled:!0}},tooltip:{enabled:!0,styles:{color:"#ffffff",background:"#403f4c",borderColor:"#fff",borderWidth:0,borderRadius:3,fontSize:12,padding:{top:10,right:10,bottom:10,left:10}}}};var N,U;!function(t){t.UNKNOWN="UNKNOWN",t.PIE="PIE",t.DONUT="DONUT"}(N||(N={})),function(t){t.LOADING="LOADING",t.INIT="INIT",t.HOVER="HOVER",t.SET_SETTINGS="SET_SETTINGS",t.SET_DATA="SET_DATA",t.RESIZE="RESIZE",t.MOUSEMOVE="MOUSEMOVE",t.MOUSEOUT="MOUSEOUT"}(U||(U={}));class A{constructor(t){this.settings=M(structuredClone(k),t.settings||{}),console.log(this.settings),this.type=t.type||N.UNKNOWN,this.canvas={element:t.element,context:t.element.getContext("2d"),valid:t.element instanceof Element&&"canvas"===t.element.tagName.toLowerCase()},this.cursor={x:0,y:0},this.state={loading:this.settings.animated?0:1},this.data=this.prepareData(t.data),this.init()}prepareData(t){return t}setSettings(t={}){M(this.settings,t),this.render({by:U.SET_SETTINGS})}getSettings(){return this.settings}setData(t){this.data=this.prepareData(t),this.render({by:U.SET_DATA})}getData(){return this.data}ratio(){const t=this.canvas,e=window.devicePixelRatio||1;t.element.width=t.element.clientWidth*e,t.element.height=t.element.clientHeight*e,t.context.scale(e,e)}clear(){const t=this.canvas;t.context.clearRect(0,0,t.element.width,t.element.height)}loading(){this.state.loading>=1||setTimeout((()=>{this.state.loading+=.03,this.state.loading=this.state.loading>1?1:this.state.loading,this.render({by:U.LOADING}),this.loading()}),1e3/60)}listeners(){const t=this.canvas;window.addEventListener("resize",(()=>{this.render({by:U.RESIZE})})),t.element.addEventListener("mousemove",(e=>{const o=t.element.getBoundingClientRect(),i=e.clientX-o.left,n=e.clientY-o.top;this.cursor={x:i,y:n},this.render({by:U.MOUSEMOVE})})),t.element.addEventListener("mouseout",(()=>{this.cursor={x:0,y:0},this.render({by:U.MOUSEOUT})}))}init(){this.render({by:U.INIT}),this.loading(),this.listeners()}tooltip(t={}){var e,o;const i=this.canvas,n=this.getSettings(),s=this.cursor;if(!(null===(e=null==n?void 0:n.tooltip)||void 0===e?void 0:e.enabled))return;const r=t.x||s.x,a=t.y||s.y;i.context.font="100 "+n.tooltip.styles.fontSize+"px arial",i.context.textAlign="left",i.context.textAlign="left",i.context.textBaseline="middle";const{width:l,height:h}=(()=>{var e,o;t.title=Object.assign(Object.assign({},t.title),{width:0,height:0,x:0,y:0}),(null===(e=t.title)||void 0===e?void 0:e.value)&&(t.title.width=i.context.measureText(t.title.value).width+n.tooltip.styles.padding.left+n.tooltip.styles.padding.right+n.tooltip.styles.borderWidth,t.title.height=2*n.tooltip.styles.padding.top+1.286*n.tooltip.styles.fontSize+n.tooltip.styles.borderWidth/2,t.title.x=n.tooltip.styles.padding.left+n.tooltip.styles.borderWidth/2,t.title.y=t.title.height/2+n.tooltip.styles.borderWidth/2),null===(o=t.panels)||void 0===o||o.forEach(((e,o)=>{var s,r,a;if((null===(s=(e=Object.assign(Object.assign({},e),{width:0,height:0,x:(()=>{let e=0;for(let i=o-1;i>=0;i--)e+=t.panels[i].width;return e})(),y:t.title.height})).colorPanel)||void 0===s?void 0:s.color)&&(e.colorPanel.height=3,e.colorPanel.x=n.tooltip.styles.borderWidth/2,e.colorPanel.y=0,e.height+=e.colorPanel.height),null===(r=e.texts)||void 0===r||r.forEach(((t,o)=>{if(!(null==t?void 0:t.value))return;let s=i.context.measureText(t.value).width+n.tooltip.styles.borderWidth;e.width<s&&(e.width=s),t.height=1.286*n.tooltip.styles.fontSize,t.x=n.tooltip.styles.padding.left+n.tooltip.styles.borderWidth/2,t.y=e.height+t.height/2,o||(t.height+=n.tooltip.styles.padding.top,t.y+=n.tooltip.styles.padding.top),o===e.texts.length-1&&(t.height+=n.tooltip.styles.padding.bottom),e.height+=t.height})),null===(a=e.footer)||void 0===a?void 0:a.text){let t=i.context.measureText(e.footer.text).width+n.tooltip.styles.borderWidth;e.width<t&&(e.width=t),e.footer.height=n.tooltip.styles.padding.bottom+1.286*n.tooltip.styles.fontSize,e.footer.x=n.tooltip.styles.padding.left+n.tooltip.styles.borderWidth/2,e.footer.y=e.height+e.footer.height/2-n.tooltip.styles.padding.bottom/2,e.height+=e.footer.height+n.tooltip.styles.borderWidth/2}e.width+=n.tooltip.styles.padding.left+n.tooltip.styles.padding.right,t.panels[o]=e}));const s=t.panels.reduce(((t,e)=>t+e.width),0);if(t.title.width>s){const e=t.title.width/t.panels.length;let o=0,i=0;for(let n=0;n<=t.panels.length-1;n++)t.panels[n].width>=e?i+=t.panels[n].width-e:o++;for(let n=0;n<=t.panels.length-1;n++)t.panels[n].width=t.panels[n].width<e?e-i/o:t.panels[n].width,t.panels[n].x=(()=>{let e=0;for(let o=n-1;o>=0;o--)e+=t.panels[o].width;return e})()}return{width:Math.max(t.title.width,s),height:t.title.height+Math.max(...(t.panels||[]).map((t=>t.height)))}})(),d=r;let c=r-l/2,p=a-h-10,f=!1;p<n.tooltip.styles.borderWidth&&(f=!0,p=a+10),c+l+n.tooltip.styles.borderWidth/2>i.element.clientWidth&&(c=i.element.clientWidth-l-n.tooltip.styles.borderWidth/2),c<n.tooltip.styles.borderWidth/2&&(c=n.tooltip.styles.borderWidth/2),i.context.fillStyle=n.tooltip.styles.background,i.context.strokeStyle=n.tooltip.styles.borderWidth>0?n.tooltip.styles.borderColor:"transparent",i.context.lineWidth=n.tooltip.styles.borderWidth,i.context.beginPath(),i.context.roundRect(c,p,l,h,n.tooltip.styles.borderRadius),i.context.closePath(),i.context.fill(),i.context.stroke(),f?(i.context.beginPath(),i.context.moveTo(d-5,p),i.context.lineTo(d,p-5),i.context.lineTo(d+5,p),i.context.fill(),i.context.stroke(),i.context.beginPath(),i.context.moveTo(d-5+n.tooltip.styles.borderWidth/4,p+n.tooltip.styles.borderWidth/2),i.context.lineTo(d,p-5+n.tooltip.styles.borderWidth/1.5),i.context.lineTo(d+5-n.tooltip.styles.borderWidth/4,p+n.tooltip.styles.borderWidth/2),i.context.fill()):(i.context.beginPath(),i.context.moveTo(d-5,p+h),i.context.lineTo(d,p+h+5),i.context.lineTo(d+5,p+h),i.context.fill(),i.context.stroke(),i.context.beginPath(),i.context.moveTo(d-5+n.tooltip.styles.borderWidth/4,p+h-n.tooltip.styles.borderWidth/2),i.context.lineTo(d,p+h+5-n.tooltip.styles.borderWidth/1.5),i.context.lineTo(d+5-n.tooltip.styles.borderWidth/4,p+h-n.tooltip.styles.borderWidth/2),i.context.fill()),i.context.fillStyle=n.tooltip.styles.color,(null===(o=t.title)||void 0===o?void 0:o.value)&&i.context.fillText(t.title.value,c+t.title.x,p+t.title.y),t.panels.forEach((t=>{i.context.fillStyle=n.tooltip.styles.color,t.colorPanel&&t.colorPanel.color&&(i.context.save(),i.context.fillStyle=t.colorPanel.color,i.context.beginPath(),i.context.rect(c+t.x+t.colorPanel.x,p+t.y+t.colorPanel.y,t.width-n.tooltip.styles.borderWidth,t.colorPanel.height),i.context.fill(),i.context.restore()),t.texts&&t.texts.forEach((e=>{e.value&&i.context.fillText(e.value,c+t.x+e.x,p+t.y+e.y)})),t.footer&&t.footer.text&&(i.context.fillStyle=W(n.tooltip.styles.color,-50),i.context.fillText(t.footer.text,c+t.x+t.footer.x,p+t.y+t.footer.y))}))}background(){const t=this.canvas,e=this.getSettings();t.context.fillStyle=e.view.styles.background,t.context.fillRect(0,0,t.element.width,t.element.height)}hover({item:t,isHovered:e}){var o,i;const n=this.getSettings();(null===(i=null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.hover)||void 0===i?void 0:i.enabled)&&(e?(t.hasOwnProperty("state")||(t.state=0),n.animated?t.state<1&&(t.state+=.05,t.state>1&&(t.state=1),this.render({by:U.HOVER})):(t.state=1,this.render({by:U.HOVER}))):n.animated?t.state>0&&(t.state-=.05,t.state<0&&(t.state=0),this.render({by:U.HOVER})):(t.state=0,this.render({by:U.HOVER})))}baseRender(t){this.ratio(),this.clear(),this.background()}render(t){this.baseRender(t)}}const j={offset:{top:30,right:30,bottom:30,left:30},data:{volumed:!0,hover:{value:10},styles:{width:80,color:"#fff"}},texts:{center:{enabled:!1,value:"100%",styles:{color:"#ffffff",fontSize:30}},slicePercent:{enabled:!1,styles:{color:"#ffffff",fontSize:10}}}};class F extends A{constructor(t){super(Object.assign(Object.assign({},t),{settings:M(structuredClone(j),t.settings||{})})),this.generatePolygon=({count:t=20,x:e,y:o,radius:i,sliceWidth:n,startPi:s,endPi:r})=>{const a=[];let l=(r-s)/t;l=isFinite(l)?l:0;for(let r=0;r<=t;r++)a.push(L(e,o,i+n/2,s+l*r));for(let s=0;s<=t;s++)a.push(L(e,o,i-n/2,r-l*s));return a},this.tooltip=()=>{const t=this.data.find((t=>t.hovered));t&&super.tooltip({title:{value:t.label},panels:[{colorPanel:{color:t.color},texts:[{value:"Value: "+t.value},{value:"Percent: "+t.percent.toFixed(2)+"%"}],footer:{text:"Total: "+t.total}}]})},this.render=t=>{this.renderTimeout&&clearTimeout(this.renderTimeout),this.renderTimeout=window.setTimeout((()=>{super.baseRender(t),this.slices(),this.tooltip()}),5)}}prepareData(t=[]){const e=(t=t.filter((t=>t.value>0))).reduce(((t,e)=>t+(parseFloat(e.value)||0)),0);return t.map((t=>Object.assign(Object.assign({},t),{percent:100/e*t.value,total:e,color:t.color||C(),state:t.state||0})))}slices(){const t=this.canvas,e=this.getSettings(),o=this.getData(),i=this.cursor,n=this.type,s=this.state,r=Math.min(t.element.clientHeight-e.offset.top-e.offset.bottom-(n===N.DONUT?e.data.styles.width:0),t.element.clientWidth-e.offset.left-e.offset.right-(n===N.DONUT?e.data.styles.width:0))*s.loading;let a=0,l=0;const h=t.element.clientWidth/2+e.offset.left-e.offset.right,d=t.element.clientHeight/2+e.offset.top-e.offset.bottom;let c=-Math.PI/2;n===N.PIE&&(a=r/2,l=r/4),n===N.DONUT&&(a=e.data.styles.width>=r?r:e.data.styles.width,l=r/2),o.forEach((o=>{const r=c,p=2*Math.PI*s.loading*o.percent/100+c,f=e.data.hover.value*o.state;o.startPi=r,o.endPi=p,c=p;const u=this.generatePolygon({x:h,y:d,radius:l+f/2,sliceWidth:a+f,startPi:r,endPi:p}),g=(({x:t,y:e,polygon:o})=>{for(var i=!1,n=0,s=o.length-1;n<o.length;s=n++){var r=o[n].x,a=o[n].y,l=o[s].x,h=o[s].y;a>e!=h>e&&t<(l-r)*(e-a)/(h-a)+r&&(i=!i)}return i})({x:i.x,y:i.y,polygon:u});o.polygon=u,o.hovered=g,super.hover({item:o,isHovered:o.hovered});const y=[];if(y.push({radius:l+f/2,width:a+f,color:W(o.color,f),x:h,y:d,startPi:r,endPi:p}),e.data.volumed){let t=0,e=0;n===N.DONUT&&(t=l-a/4+f/2,e=a/2+f),n===N.PIE&&(t=l-a/6+f/2,e=2*t),y.push({radius:t,width:e,color:W(o.color,-50+f),x:h,y:d,startPi:r,endPi:p})}y.forEach((e=>{t.context.save(),t.context.beginPath(),t.context.strokeStyle=e.color,t.context.lineWidth=e.width,t.context.fillStyle="transparent",t.context.arc(e.x,e.y,e.radius>0?e.radius:0,e.startPi,e.endPi),t.context.fill(),t.context.stroke(),t.context.restore()}))})),e.texts.slicePercent.enabled&&o.forEach((o=>{t.context.font="100 "+e.texts.slicePercent.styles.fontSize+"px arial",t.context.textAlign="center",t.context.textBaseline="middle",t.context.fillStyle=e.texts.slicePercent.styles.color;let i=l;const s=e.data.hover.value*o.state;n===N.DONUT&&(i+=e.data.volumed?a/4+s:s/2),n===N.PIE&&(i+=e.data.volumed?a/3+s:s/2);const r=parseFloat(o.percent.toFixed(2))+"%",c=L(h,d,i,(o.startPi+o.endPi)/2);t.context.fillText(r,c.x,c.y)})),e.texts.center.enabled&&(t.context.font="800 "+e.texts.center.styles.fontSize*s.loading+"px arial",t.context.textAlign="center",t.context.textBaseline="middle",t.context.fillStyle=e.texts.center.styles.color,t.context.fillText(e.texts.center.value,h,d))}}class H extends F{constructor(t){super(Object.assign({type:N.DONUT},t))}}class q extends F{constructor(t){super(Object.assign({type:N.PIE},t))}}const V=class{constructor(){this.events={},this.publish=(t,...e)=>{this.events[t]&&this.events[t].forEach((t=>t(...e)))},this.on=(t,e)=>{this.events[t]||(this.events[t]=[]),this.events[t].push(e)},this.off=(t,e)=>{this.events[t]&&(this.events[t]=this.events[t].filter((t=>e!==t)))}}},z=t=>{const{data:e,url:o="",method:i="GET",additionalHeaders:n={},additionalOptions:s={},responseParse:r=!0,baseUrl:a=window.location.origin,catcher:l,mock:h}=t;if(null==h?void 0:h.data)return new Promise((t=>{setTimeout((()=>{t(h.data)}),(null==h?void 0:h.delay)||1e3)}));const d=t.dataToQuery||"GET"===i,c=Object.assign({"Content-Type":"application/json"},n),p=(t,e)=>{(null==t?void 0:t.json)&&r?t.json().then(e).catch((()=>e({}))):e(t)};return new Promise(((t,n)=>{const r=new URL(`${a}${o}`),h=Object.assign({method:i,headers:c},s);e&&(d?Object.keys(e).forEach((t=>r.searchParams.append(t,e[t]))):h.body=JSON.stringify(e)),fetch(r.toString(),h).then((e=>{if(!e.ok)throw e;p(e,t)})).catch((t=>{p(t,(t=>{l&&l(t),n(t)}))}))}))},_=function(t,e){this.getItems=function(t){return t instanceof NodeList?t:t instanceof Node?[t]:document.querySelectorAll(t)},this.items=this.getItems(t),this.in=!!e.in&&e.in,this.out=!!e.out&&e.out,this.activeList=!!e.activeList&&e.activeList,this.scrollTop=0,this.offset=e.offset?e.offset:0,this.dynamicDom=!!e.dynamicDom&&e.dynamicDom,this.intervalChecking=!!e.intervalChecking&&e.intervalChecking,this.setScrollTop=function(t){this.scrollTop=t},this.checkItem=function(t){let e=t.getBoundingClientRect(),o=parseFloat(this.offset)||0,i=parseFloat(this.offset)||0,n=window.innerHeight;return window.getComputedStyle(t),this.offset&&this.offset.top&&parseFloat(this.offset.top)&&(o=parseFloat(this.offset.top)),this.offset&&this.offset.bottom&&parseFloat(this.offset.bottom)&&(i=parseFloat(this.offset.bottom)),e.top-o+e.height>=0&&e.top+i+n<=2*n?{bool:!0}:e.top+i+n>2*n?{bool:!1,direction:"bottom"}:e.top-o+e.height<0?{bool:!1,direction:"top"}:void 0},this.checkItems=function(){if(this.items=this.dynamicDom?this.getItems(t):this.items,!this.items)return!1;let e=[];this.items.forEach(((t,o)=>{let i=this.checkItem(t);i.bool&&this.in&&this.in(t),i.bool&&this.activeList&&e.push(t),!i.bool&&this.out&&this.out(t,i.direction)})),this.activeList&&this.activeList(e)},this.watch=function(){new MutationObserver((function(t){t.forEach((function(t){console.log(t)}))})).observe(document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.setScrollTop(window.pageYOffset),this.checkItems(),this.intervalChecking&&setInterval((()=>{this.setScrollTop(window.pageYOffset),this.checkItems()}),this.intervalChecking),window.addEventListener("scroll",(()=>{this.setScrollTop(window.pageYOffset),this.checkItems()})),window.addEventListener("resize",(()=>{this.setScrollTop(window.pageYOffset),this.checkItems()}))},this.watch()},Y=function(t){return this.options=t,this.options.container=this.options.container?this.options.container:"#app",this.options.navItems=this.options.navItems?this.options.navItems:".ajax",this.options.preloader=!!this.options.preloader,this.beforeInit=!!this.options.beforeInit&&this.options.beforeInit,this.afterInit=!!this.options.afterInit&&this.options.afterInit,this.beforeRendered=!!this.options.beforeRendered&&this.options.beforeRendered,this.afterRendered=!!this.options.afterRendered&&this.options.afterRendered,this.app=document.querySelector(this.options.container),this.isLoadProcess=!1,this.exact=!!this.options.exact,this.get=function(t,e,o,i,n){var s,r,a=new XMLHttpRequest,l="";for(r in o)l+=encodeURIComponent(r)+"="+encodeURIComponent(o[r])+"&";"GET"===e&&l&&(t=t+"?"+l),a.open(e,t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),"GET"===e&&a.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),a.send(l),a.onreadystatechange=function(){4==a.readyState&&(200!=a.status?n(a):(s=a.responseText,i(s)))}},this.createPreloader=function(){var t=document.createElement("div"),e=document.createElement("div");return t.classList.add("preloader"),e.classList.add("preloader-spinner"),t.appendChild(e),t},this.appendPreloader=function(){var t=this;this.preloader=this.createPreloader(),document.body.appendChild(this.preloader),setTimeout((function(){t.preloader.classList.add("preloader__visible")}),0)},this.removePreloader=function(){var t=this;t.preloader.classList.remove("preloader__visible"),setTimeout((function(){t.preloader.parentNode.removeChild(t.preloader)}),400)},this.loadStart=function(){this.isLoadProcess=!0,this.options.preloader&&this.appendPreloader()},this.loadEnd=function(){this.isLoadProcess=!1,this.options.preloader&&this.removePreloader()},this.parseAndReplace=function(t,e,o){var i=this,n=(new DOMParser).parseFromString(t,"text/html"),s=document.querySelector(i.options.container),r=n.querySelector(i.options.container),a=n.head.querySelector("title").innerHTML,l=n.body.className;document.body.className=l,document.querySelector("head title").innerHTML=a,r&&s?(s.parentNode.replaceChild(r,s),o&&history.pushState(null,null,e),i.addLinksEvent(i.options.navItems),i.afterRendered&&i.afterRendered(r),i.loadEnd()):window.location=e},this.getContent=function(t,e){var o=this;o.beforeRendered&&o.beforeRendered(),o.exact&&this.href===location.href||o.isLoadProcess||(o.loadStart(),o.get(t,"POST",{},(function(i){o.parseAndReplace(i,t,e)}),(function(i){404===i.status?o.parseAndReplace(i.responseText,t,e):o.loadEnd(),0===i.status&&window.open(t)})))},this.addLinksEvent=function(t){for(var e=this,o=(t=t||this.options.navItems,document.querySelectorAll(t)),i=0;i<o.length;i++)o[i]instanceof Element&&"a"===o[i].tagName.toLowerCase()&&o[i].addEventListener("click",(function(t){t.preventDefault();var o=this.href;e.getContent(o,!0)}))},this.popStateListener=function(){var t=this;window.addEventListener("popstate",(function(e){t.getContent(location.pathname+location.search,!1)}))},this.goTo=function(t){this.getContent(t,!0)},this.init=function(){return this.loadStart(),window.addEventListener("load",(()=>{this.loadEnd()})),this.beforeInit&&this.beforeInit(),this.addLinksEvent(this.options.navItems),this.popStateListener(),this.afterRendered&&this.afterRendered(document.querySelector(this.options.container)),this.afterInit&&this.afterInit(),this},this.init()};module.exports=e})();
//# sourceMappingURL=bundle.js.map